{"ast":null,"code":"import _objectSpread from\"F:/AI/myRepository/ChatGPT/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"F:/AI/myRepository/ChatGPT/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"F:/AI/myRepository/ChatGPT/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"F:/AI/myRepository/ChatGPT/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/AI/myRepository/ChatGPT/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from\"react\";import ChatContainer from\"./ChatContainer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatBoxContainer=function ChatBoxContainer(_ref){var chatLog=_ref.chatLog,setChatLog=_ref.setChatLog;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userInput=_useState2[0],setUserInput=_useState2[1];var messagesEndRef=useRef(null);var scrollToBottom=function scrollToBottom(){var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};useEffect(function(){scrollToBottom();},[chatLog]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var newChatLogData,messages,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();newChatLogData=[].concat(_toConsumableArray(chatLog),[{user:\"human\",message:\"\".concat(userInput)}]);setUserInput(\"\");setChatLog(newChatLogData);messages=newChatLogData.map(function(message){return message.message;}).join(\"\\n\");_context.next=7;return fetch(\"https://helpai-chatgpt-clone.onrender.com\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({message:messages})});case 7:response=_context.sent;_context.next=10;return response.json();case 10:data=_context.sent;setChatLog([].concat(_toConsumableArray(newChatLogData),[{user:\"gpt\",message:\"\".concat(data.message)}]));case 12:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-log\",children:[chatLog.map(function(item,i){return/*#__PURE__*/_jsx(ChatContainer,_objectSpread({},item),i);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-input-holder\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(\"input\",{value:userInput,onChange:function onChange(e){return setUserInput(e.target.value);},className:\"chat-input-textarea\",placeholder:\"Ask Me Anthing...\"})})})]});};export default ChatBoxContainer;","map":{"version":3,"names":["React","useState","useEffect","useRef","ChatContainer","ChatBoxContainer","chatLog","setChatLog","userInput","setUserInput","messagesEndRef","scrollToBottom","current","scrollIntoView","behavior","handleSubmit","e","preventDefault","newChatLogData","user","message","messages","map","join","fetch","method","headers","body","JSON","stringify","response","json","data","item","i","target","value"],"sources":["F:/AI/myRepository/ChatGPT/client/src/components/ChatBoxContainer.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport ChatContainer from \"./ChatContainer\";\r\n\r\nconst ChatBoxContainer = ({ chatLog, setChatLog }) => {\r\n  const [userInput, setUserInput] = useState(\"\");\r\n\r\n  const messagesEndRef = useRef(null);\r\n  \r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [chatLog]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const newChatLogData = [\r\n      ...chatLog,\r\n      { user: \"human\", message: `${userInput}` },\r\n    ];\r\n\r\n    setUserInput(\"\");\r\n    setChatLog(newChatLogData);\r\n\r\n    const messages = newChatLogData.map((message) => message.message).join(\"\\n\");\r\n    const response = await fetch(\"https://helpai-chatgpt-clone.onrender.com\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        message: messages,\r\n      }),\r\n    });\r\n    const data = await response.json();\r\n\r\n    setChatLog([\r\n      ...newChatLogData,\r\n      { user: \"gpt\", message: `${data.message}` },\r\n    ]);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"chat-log\">\r\n        {chatLog.map((item, i) => (\r\n          <ChatContainer key={i} {...item} />\r\n        ))}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n      <div className=\"chat-input-holder\">\r\n        <form onSubmit={handleSubmit}>\r\n          <input\r\n            value={userInput}\r\n            onChange={(e) => setUserInput(e.target.value)}\r\n            className=\"chat-input-textarea\"\r\n            placeholder=\"Ask Me Anthing...\"\r\n          ></input>\r\n          {/* <button className=\"btn chat-btn-submit\" /> */}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatBoxContainer;\r\n"],"mappings":"0mBAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,MAAOC,cAAa,KAAM,iBAAiB,CAAC,wFAE5C,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAgB,MAAgC,IAA1BC,QAAO,MAAPA,OAAO,CAAEC,UAAU,MAAVA,UAAU,CAC7C,cAAkCN,QAAQ,CAAC,EAAE,CAAC,wCAAvCO,SAAS,eAAEC,YAAY,eAE9B,GAAMC,eAAc,CAAGP,MAAM,CAAC,IAAI,CAAC,CAEnC,GAAMQ,eAAc,CAAG,QAAjBA,eAAc,EAAS,2BAC3B,uBAAAD,cAAc,CAACE,OAAO,gDAAtB,sBAAwBC,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CAChE,CAAC,CAEDZ,SAAS,CAAC,UAAM,CACdS,cAAc,EAAE,CAClB,CAAC,CAAE,CAACL,OAAO,CAAC,CAAC,CAEb,GAAMS,aAAY,6FAAG,iBAAOC,CAAC,6JAC3BA,CAAC,CAACC,cAAc,EAAE,CAEZC,cAAc,8BACfZ,OAAO,GACV,CAAEa,IAAI,CAAE,OAAO,CAAEC,OAAO,WAAKZ,SAAS,CAAG,CAAC,GAG5CC,YAAY,CAAC,EAAE,CAAC,CAChBF,UAAU,CAACW,cAAc,CAAC,CAEpBG,QAAQ,CAAGH,cAAc,CAACI,GAAG,CAAC,SAACF,OAAO,QAAKA,QAAO,CAACA,OAAO,GAAC,CAACG,IAAI,CAAC,IAAI,CAAC,uBACrDC,MAAK,CAAC,2CAA2C,CAAE,CACxEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBT,OAAO,CAAEC,QACX,CAAC,CACH,CAAC,CAAC,QANIS,QAAQ,sCAOKA,SAAQ,CAACC,IAAI,EAAE,SAA5BC,IAAI,eAEVzB,UAAU,8BACLW,cAAc,GACjB,CAAEC,IAAI,CAAE,KAAK,CAAEC,OAAO,WAAKY,IAAI,CAACZ,OAAO,CAAG,CAAC,GAC3C,CAAC,sDACJ,kBAzBKL,aAAY,6CAyBjB,CAED,mBACE,oCACE,aAAK,SAAS,CAAC,UAAU,WACtBT,OAAO,CAACgB,GAAG,CAAC,SAACW,IAAI,CAAEC,CAAC,qBACnB,KAAC,aAAa,kBAAaD,IAAI,EAAXC,CAAC,CAAc,EACpC,CAAC,cACF,YAAK,GAAG,CAAExB,cAAe,EAAG,GACxB,cACN,YAAK,SAAS,CAAC,mBAAmB,uBAChC,aAAM,QAAQ,CAAEK,YAAa,uBAC3B,cACE,KAAK,CAAEP,SAAU,CACjB,QAAQ,CAAE,kBAACQ,CAAC,QAAKP,aAAY,CAACO,CAAC,CAACmB,MAAM,CAACC,KAAK,CAAC,EAAC,CAC9C,SAAS,CAAC,qBAAqB,CAC/B,WAAW,CAAC,mBAAmB,EACxB,EAEJ,EACH,GACF,CAEV,CAAC,CAED,cAAe/B,iBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}